@model SignatureViewModel;
@{
    ViewData["Title"] = "Signer Embedded Signatures Examples";
}
<div class="container" style="margin-top:30px">
    <div class="row form-group" style="height:600px">
        <div class="col-sm-4">
            <div class="row mt-3">
                <div class="col-sm-12">
                    <button id="Sign1" onclick="sign(event, '@Model.embedUrlDigital', true)" class="btn btn-primary">Click here to sign Digital With Preview</button>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-sm-12">
                    <button id="Sign2" onclick="sign(event, '@Model.embedUrlDigital', false)" class="btn btn-primary">Click here to sign Digital Without Preview</button>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-sm-12">
                    <button id="Sign3" onclick="sign(event, '@Model.embedUrlEletronic', true)" class="btn btn-primary">Click here to sign Electronic With Preview</button>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-sm-12">
                    <button id="Sign4" onclick="sign(event, '@Model.embedUrlEletronic', false)" class="btn btn-primary">Click here to sign Electronic Without Preview</button>
                </div>
            </div>
        </div>
        <div class="col-sm-12">
            <div id="embed-container" class="frame-container"></div>
        </div>
        <div class="row mt-3">
            <div class="col-sm-12">
                <button id="refresh-btn" hidden="true">
                    Refresh page
                </button>
            </div>
        </div>
    </div>
</div>

@section Scripts
	{
<script>

    $(document).ready(function() {
         $('#Sign');
    });

    function sign(event, url, allowPreviewDocument) {
        console.log(this);
        console.log(event.target);
        HideButtons(event.target);
        $("#refresh-btn").hidden = false;
        console.log(url);
        var widget = allowPreviewDocument ? new LacunaSignerWidget() : new LacunaSignerWidget(
            { disableDocumentPreview: true, enableRefusal: true});
        widget.render(url,'embed-container');
        widget.on(widget.events.documentSigned, function (e) {
            alert('Document ' + e.id + ' signed');
            $.blockUI({message: 'Initializing ...'});
            //showAllButtons();
            $("#embed-container").empty();
            window.location.reload(true);

        });
    }

    function HideButtons(target){
        //target.disabled = true;
        for(i=1; i<=4; i++){
            var sign = "Sign" + i;
            document.getElementById(sign).hidden = true;
        }
    }

    function showAllButtons() {
         for(i=1; i<=4; i++){
            var sign = "Sign" + i;
            document.getElementById(sign).hidden = false;
        } 
    }

</script>
}
